(()=>{"use strict";const e=[{Backquote:{valueEn:{key:"`",shiftKey:"~"},valueRu:{key:"ё",shiftKey:"Ё"}}},{Digit1:{valueEn:{key:"1",shiftKey:"!"},valueRu:{key:"1",shiftKey:"!"}}},{Digit2:{valueEn:{key:"2",shiftKey:"@"},valueRu:{key:"2",shiftKey:'"'}}},{Digit3:{valueEn:{key:"3",shiftKey:"#"},valueRu:{key:"3",shiftKey:"№"}}},{Digit4:{valueEn:{key:"4",shiftKey:"$"},valueRu:{key:"4",shiftKey:";"}}},{Digit5:{valueEn:{key:"5",shiftKey:"%"},valueRu:{key:"5",shiftKey:"%"}}},{Digit6:{valueEn:{key:"6",shiftKey:"^"},valueRu:{key:"6",shiftKey:":"}}},{Digit7:{valueEn:{key:"7",shiftKey:"&"},valueRu:{key:"7",shiftKey:"?"}}},{Digit8:{valueEn:{key:"8",shiftKey:"*"},valueRu:{key:"8",shiftKey:"*"}}},{Digit9:{valueEn:{key:"9",shiftKey:"("},valueRu:{key:"9",shiftKey:"("}}},{Digit0:{valueEn:{key:"0",shiftKey:")"},valueRu:{key:"0",shiftKey:")"}}},{Minus:{valueEn:{key:"-",shiftKey:"_"},valueRu:{key:"-",shiftKey:"_"}}},{Equal:{valueEn:{key:"=",shiftKey:"+"},valueRu:{key:"=",shiftKey:"+"}}},{Backspace:{valueEn:{key:"Backspace"},valueRu:{key:"Backspace"}}},{Tab:{valueEn:{key:"Tab"},valueRu:{key:"Tab"}}},{KeyQ:{valueEn:{key:"q",shiftKey:"Q"},valueRu:{key:"й",shiftKey:"Й"}}},{KeyW:{valueEn:{key:"w",shiftKey:"W"},valueRu:{key:"ц",shiftKey:"Ц"}}},{KeyE:{valueEn:{key:"e",shiftKey:"E"},valueRu:{key:"у",shiftKey:"У"}}},{KeyR:{valueEn:{key:"r",shiftKey:"R"},valueRu:{key:"к",shiftKey:"К"}}},{KeyT:{valueEn:{key:"t",shiftKey:"T"},valueRu:{key:"е",shiftKey:"Е"}}},{KeyY:{valueEn:{key:"y",shiftKey:"Y"},valueRu:{key:"н",shiftKey:"Н"}}},{KeyU:{valueEn:{key:"u",shiftKey:"U"},valueRu:{key:"г",shiftKey:"Г"}}},{KeyI:{valueEn:{key:"i",shiftKey:"I"},valueRu:{key:"ш",shiftKey:"Ш"}}},{KeyO:{valueEn:{key:"o",shiftKey:"O"},valueRu:{key:"щ",shiftKey:"Щ"}}},{KeyP:{valueEn:{key:"p",shiftKey:"P"},valueRu:{key:"з",shiftKey:"З"}}},{BracketLeft:{valueEn:{key:"[",shiftKey:"{"},valueRu:{key:"х",shiftKey:"Х"}}},{BracketRight:{valueEn:{key:"]",shiftKey:"}"},valueRu:{key:"ъ",shiftKey:"Ъ"}}},{Backslash:{valueEn:{key:"\\",shiftKey:"|"},valueRu:{key:"\\",shiftKey:"/"}}},{Delete:{valueEn:{key:"Del"},valueRu:{key:"Del"}}},{CapsLock:{valueEn:{key:"CapsLock"},valueRu:{key:"CapsLock"}}},{KeyA:{valueEn:{key:"a",shiftKey:"A"},valueRu:{key:"ф",shiftKey:"Ф"}}},{KeyS:{valueEn:{key:"s",shiftKey:"S"},valueRu:{key:"ы",shiftKey:"Ы"}}},{KeyD:{valueEn:{key:"d",shiftKey:"D"},valueRu:{key:"в",shiftKey:"В"}}},{KeyF:{valueEn:{key:"f",shiftKey:"F"},valueRu:{key:"а",shiftKey:"А"}}},{KeyG:{valueEn:{key:"g",shiftKey:"G"},valueRu:{key:"п",shiftKey:"П"}}},{KeyH:{valueEn:{key:"h",shiftKey:"H"},valueRu:{key:"р",shiftKey:"Р"}}},{KeyJ:{valueEn:{key:"j",shiftKey:"J"},valueRu:{key:"о",shiftKey:"О"}}},{KeyK:{valueEn:{key:"k",shiftKey:"K"},valueRu:{key:"л",shiftKey:"Л"}}},{KeyL:{valueEn:{key:"l",shiftKey:"L"},valueRu:{key:"д",shiftKey:"Д"}}},{Semicolon:{valueEn:{key:";",shiftKey:":"},valueRu:{key:"ж",shiftKey:"Ж"}}},{Quote:{valueEn:{key:"'",shiftKey:'"'},valueRu:{key:"э",shiftKey:"Э"}}},{Enter:{valueEn:{key:"Enter &crarr;"},valueRu:{key:"Enter &crarr;"}}},{ShiftLeft:{valueEn:{key:"Shift"},valueRu:{key:"Shift"}}},{IntlBackslash:{valueEn:{key:"\\",shiftKey:"|"},valueRu:{key:"\\",shiftKey:"/"}}},{KeyZ:{valueEn:{key:"z",shiftKey:"Z"},valueRu:{key:"я",shiftKey:"Я"}}},{KeyX:{valueEn:{key:"x",shiftKey:"X"},valueRu:{key:"ч",shiftKey:"Ч"}}},{KeyC:{valueEn:{key:"c",shiftKey:"C"},valueRu:{key:"с",shiftKey:"С"}}},{KeyV:{valueEn:{key:"v",shiftKey:"V"},valueRu:{key:"м",shiftKey:"М"}}},{KeyB:{valueEn:{key:"b",shiftKey:"B"},valueRu:{key:"и",shiftKey:"И"}}},{KeyN:{valueEn:{key:"n",shiftKey:"N"},valueRu:{key:"т",shiftKey:"Т"}}},{KeyM:{valueEn:{key:"m",shiftKey:"M"},valueRu:{key:"ь",shiftKey:"Ь"}}},{Comma:{valueEn:{key:",",shiftKey:"<"},valueRu:{key:"б",shiftKey:"Б"}}},{Period:{valueEn:{key:".",shiftKey:">"},valueRu:{key:"ю",shiftKey:"Ю"}}},{Slash:{valueEn:{key:"/",shiftKey:"?"},valueRu:{key:".",shiftKey:","}}},{ArrowUp:{valueEn:{key:"▲"},valueRu:{key:"▲"}}},{ShiftRight:{valueEn:{key:"Shift"},valueRu:{key:"Shift"}}},{ControlLeft:{valueEn:{key:"Ctrl"},valueRu:{key:"Ctrl"}}},{MetaLeft:{valueEn:{key:"Win"},valueRu:{key:"Win"}}},{AltLeft:{valueEn:{key:"Alt"},valueRu:{key:"Alt"}}},{Space:{valueEn:{key:" "},valueRu:{key:" "}}},{AltRight:{valueEn:{key:"Alt"},valueRu:{key:"Alt"}}},{ControlRight:{valueEn:{key:"Ctrl"},valueRu:{key:"Ctrl"}}},{ArrowLeft:{valueEn:{key:"◄"},valueRu:{key:"◄"}}},{ArrowDown:{valueEn:{key:"▼"},valueRu:{key:"▼"}}},{ArrowRight:{valueEn:{key:"►"},valueRu:{key:"►"}}}];(new function(){const t=localStorage.getItem("keyboardProperties")?JSON.parse(localStorage.getItem("keyboardProperties")):{lang:"En",capsOn:!1};let a=[!1,"",!1];this.init=()=>{this.create(),this.addEventKeysKeyboard(),this.addEventKeysMouse()},this.create=()=>{const e=document.createElement("div");e.setAttribute("id","app-keyboard");const t=document.createElement("div");t.classList.add("app-keyboard__other-inform"),t.innerHTML="\n                            <div>Операционная система Windows. Переключение языка Shift+Alt. Del - удаление всего текста.</div>\n                        ";const a=document.createElement("div");a.classList.add("app-keyboard__textarea"),a.innerHTML='\n                                <textarea class="app-keyboard__textarea__item" wrap autofocus></textarea>\n                            ',this.keyboardWripper=document.createElement("div"),this.keyboardWripper.classList.add("keyboard__wrapper"),this.getKeys(),e.append(a,this.keyboardWripper,t),document.body.append(e),this.textareaItem=document.querySelector(".app-keyboard__textarea__item")},this.getKeys=()=>{let y=e,{lang:s,capsOn:i}=t,u="";y.forEach((e=>{let t=Object.keys(e)[0],{key:y,shiftKey:l=y}=e[t]["value"+s];y=1===y.length&&i?y.toUpperCase():y;let n=i?l.toLowerCase():l.toUpperCase();l=1===l.length&&a?n:l,u+=`\n                                    <div class="${t} ${"CapsLock"===t&&i?"active":""} ${t===a[1]&&a[0]?"active__press":""} keyboard__keys">\n                                          ${a[0]?l:y}\n                                    </div>\n                                    `})),this.keyboardWripper.innerHTML=u,this.addEventKeysMouse()},this.addEventKeysKeyboard=()=>{document.addEventListener("keydown",(y=>{switch(y.preventDefault(),y.code){case"CapsLock":t.capsOn=!t.capsOn;break;case"AltLeft":y.getModifierState("Shift")&&(t.lang="En"===t.lang?"Ru":"En");break;case"ShiftLeft":case"ShiftRight":a[0]=!0,a[1]=y.code}!a[2]&&a[0]&&(this.getKeys(),a[2]=!0),this.pressKeyKeybord(y);let s=e.filter((e=>Object.keys(e)[0]===y.code));s=s.map((e=>{let y=e[Object.keys(e)[0]]["value"+t.lang][a[0]?"shiftKey":"key"];return y=y||e[Object.keys(e)[0]]["value"+t.lang].key,y}))[0],void 0!==s?(1===s.length&&t.capsOn&&a[0]?s=s.toLowerCase():1===s.length&&t.capsOn&&(s=s.toUpperCase()),this.inputTextKeyboard(s),localStorage.setItem("keyboardProperties",JSON.stringify(t))):this.popUp()})),document.addEventListener("keyup",(e=>{a[0]="Shift"!==e.key&&a[0],a[1]="Shift"===e.key?"":a[1],a[2]="Shift"!==e.key&&a[2],this.getKeys(),localStorage.setItem("keyboardProperties",JSON.stringify(t))}))},this.popUp=()=>{if(document.querySelector(".pop-up__attention"))return;const e=document.createElement("div");e.classList.add("pop-up__attention"),e.innerHTML=`\n                        <div class="pop-up">\n                          ${"Ru"===t.lang?"<h1>Извините. Данная кнопка на этом устройстве не работает:(</h1>":"<h1>Sorry. This button does not work on this device:(</h1>"}\n                          <button class="pop-up__close"></button>\n                        </div>\n                      `,document.body.append(e),document.querySelector(".pop-up__close").addEventListener("click",(()=>{e.remove()}))},this.pressKeyKeybord=e=>{document.querySelectorAll(".keyboard__keys").forEach((t=>{t.classList.contains(e.code)&&t.classList.add("active__press")}))},this.addEventKeysMouse=()=>{document.querySelectorAll(".keyboard__keys").forEach((e=>{e.addEventListener("click",(e=>{if(e.target.classList.contains("CapsLock"))t.capsOn=!t.capsOn,this.getKeys();else{let t="Space"===e.target.classList[0]?" ":e.target.innerText;this.inputTextKeyboard(t)}}))}))};let y=this.textareaItem?this.textareaItem.value:"";this.inputTextKeyboard=e=>{let t=1===e.length?e:"",a=this.textareaItem.selectionStart;const s=e=>{let t="Del"===e?a:a-1;y=y.split("").filter(((e,a)=>a!==t)).join(""),this.textareaItem.value=y,this.textareaItem.selectionEnd=t<0?0:t,this.textareaItem.selectionStart=this.textareaItem.selectionEnd,this.textareaItem.focus()},i=e=>{let t=a-1<0?0:a-1;0===a&&y.length>0?(y=y.split(""),y.unshift(e),y=y.join("")):y=y.length>0?y.split("").map(((a,y)=>y===t?a+e:a)).join(""):e,this.textareaItem.value=y,this.textareaItem.selectionEnd=a+e.length,this.textareaItem.selectionStart=this.textareaItem.selectionEnd,this.textareaItem.focus()};switch(e.split(" ")[0]){case"Enter":t="\n",i(t);break;case"Tab":t="\t",i(t);break;case"Backspace":s("Back");break;case"Del":s("Del");break;default:i(t)}}}).init()})();